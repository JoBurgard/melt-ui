<script lang="ts">
	import { createAvatar, melt } from '$lib/index.js';

	const {
		elements: { image, fallback },
	} = createAvatar({
		src: 'https://avatars.githubusercontent.com/u/1162160?v=4',
	});

	// With an exaggerated fallback delay
	const {
		elements: { image: imageA, fallback: fallbackA },
	} = createAvatar({
		src: 'https://avatars.githubusercontent.com/u/5968653?v=4',
		delayMs: 650,
	});

	// A blank source to demonstrate the fallback
	const {
		elements: { image: imageB, fallback: fallbackB },
	} = createAvatar({
		src: '',
	});
</script>

<div class="root">
	<div class="item">
		<img use:melt={$image} alt="Avatar" class="avatar" />
		<span use:melt={$fallback} class="fallback">RH</span>
	</div>

	<div class="item">
		<img use:melt={$imageA} alt="Avatar" class="avatar" />
		<span use:melt={$fallbackA} class="fallback">SH</span>
	</div>

	<div class="item">
		<img use:melt={$imageB} alt="Avatar" class="avatar" />
		<span use:melt={$fallbackB} class="fallback">UI</span>
	</div>
</div>

<style>
	* {
		all: unset;
		box-sizing: border-box;
	}

	:root {
		--magnum-700: #bd5711;
		--neutral-100: #f5f5f5;
	}

	.root {
		display: flex;
		width: 100%;
		align-items: center;
		justify-content: center;
		gap: 1.5rem;
	}

	.item {
		display: flex;
		height: 4rem;
		width: 4rem;
		align-items: center;
		justify-content: center;
		border-radius: 9999px;
		overflow: hidden;
		background-color: var(--neutral-100);
	}

	.item > .avatar {
		height: 100%;
		width: 100%;
		border-radius: inherit;
	}

	.item > .fallback {
		font-size: 1.875rem;
		line-height: 1.875rem;
		font-weight: 500;
		color: var(--magnum-700);
	}
</style>
